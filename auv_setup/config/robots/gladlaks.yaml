# This file defines parameters specific to Gladlaks
#
# When looking at the AUV from above, the thruster placement is:   
#
#        front
#       |======|
#  |=7↗=|      |=0↖=|
#  |    |      |    |
#  | 6⨯ |      | 1⨯ |
#  |    |      |    |
#  |    |      |    |
#  | 5⨯ |      | 2⨯ |
#  |    |      |    |
#  |=4↘=|==||==|=3↙=|
#

physical:
  mass_kg: TODO
  displacement_m3: TODO
  center_of_mass: [TODO, TODO, TODO]
  center_of_buoyancy: [TODO, TODO, TODO]
#  drag_coefficients: [TODO, TODO, TODO, TODO, TODO, TODO] Not in use anywhere

propulsion:
  dofs:
    num: 6
    which:
      surge: true
      sway:  true
      heave: true
      roll:  true
      pitch: true
      yaw:   true
  thrusters:
    num: 8
    configuration_matrix:
      [[ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO], # Surge
       [ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO], # Sway
       [ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO], # Heave
       [ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO], # Roll
       [ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO], # Pitch
       [ TODO, TODO, TODO, TODO, TODO, TODO, TODO, TODO]] # Yaw

    rate_of_change:
      max: TODO # Maximum rate of change in newton per second for a thruster
    characteristics:  # The relationship between thrust in newton and the width in microseconds of the PWM signal to the ESCs: See T200 excel sheet
      thrust:      [TODO]
      pulse_width: [TODO]

controllers:
  dp:
    circleOfAcceptance: 0.10
    frequency: 40 # THIS SHOULD BE 40Hz for the controller to perform good. This is because the built in reference model will work 2x faster as if the controller ran at 20Hz
    velocity_gain: 3.5   #0.4
    position_gain: 30.5   #5.0
    attitude_gain: 1.3  #2.5
    integral_gain: 0.024 #0.3
  los_controller: # Note: Not loaded by the backstepping/pid controllers yet! Make sure to do this after tuning with dyn. reconf.
    PID:
      p: 25.0
      i: 0.0024
      d: 3.5
      sat: 3.0
    backstepping:
      c:  3.75
      k1: 45.0
      k2: 28.0
      k3: 10.5
      
guidance:
  LOS:
    delta: 0.7
        
joystick:
  scaling:
    surge: 10
    sway: 10
    heave: 10
    roll: 5
    pitch: 5
    yaw: 5

battery:
  thresholds:
    warning: 15000  # Millivolts
    critical: 14000 # Millivolts
  logging:
    frequency: 10   # Seconds
    path: "/sys/bus/i2c/drivers/ina3221x/1-0040/iio:device0/in_voltage0_input" # Path to monitor